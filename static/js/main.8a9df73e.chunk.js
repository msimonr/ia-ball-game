(this["webpackJsonpia-ball-game"]=this["webpackJsonpia-ball-game"]||[]).push([[0],{247:function(e,t,a){e.exports=a(274)},252:function(e,t,a){},258:function(e,t){},259:function(e,t){},267:function(e,t){},270:function(e,t){},271:function(e,t){},272:function(e,t,a){},274:function(e,t,a){"use strict";a.r(t);var n=a(43),r=a.n(n),i=a(226),c=a.n(i),o=(a(252),a(5)),l=a.n(o),s=a(13),u=a(6),d=a(11),f=a(14),p=a(15),h=(a(273),a(246)),b=a(245),y=a.n(b),v=(a(272),a(17)),x=a(8),m=function(e,t,a){t.fillStyle="#FF0000".concat(a.transparencia),t.beginPath(),t.arc(a.x,a.y,a.r,0,2*Math.PI,0),t.fill(),t.strokeStyle="#000000".concat(a.transparencia),t.lineWidth=.1*a.r,t.stroke(),e.forEach((function(e){var a=Object(x.a)(e.bbox,4),n=a[0],r=a[1],i=a[2],c=a[3],o=e.class,l=Math.floor(100*e.score),s="green";"person"!==o&&(s="gray"),t.strokeStyle=s,t.font="18px Arial",t.fillStyle=s,t.beginPath(),t.scale(-1,1),t.fillText(o+" "+l+"%",-i-n,r),t.scale(-1,1),t.lineWidth=3,t.rect(n,r,i,c),t.stroke()}))},g=function(e,t){var a,n=Object(v.a)(e);try{for(n.s();!(a=n.n()).done;){var r=a.value;if("person"===r.class&&r.score>.5){var i=r.bbox[0],c=r.bbox[1],o=r.bbox[2],l=r.bbox[3],s=t.x,u=t.y;if(t.x<i?s=i:t.x>i+o&&(s=i+o),t.y<c?u=c:t.y>c+l&&(u=c+l),Math.sqrt(Math.pow(t.x-s,2)+Math.pow(t.y-u,2))+.7*t.r<t.r)return r}}}catch(d){n.e(d)}finally{n.f()}},E=function(e,t,a,n){a.drawImage(e,0,0);var r=Object(x.a)(t.bbox,4),i=r[0],c=r[1],o=r[2],l=r[3];a.strokeStyle="red",a.font="30px bold Arial",a.fillStyle="red",a.beginPath(),a.scale(-1,1),a.fillText("\xa1Toque!",-i-o,c-5),a.scale(-1,1),a.lineWidth=3,a.rect(i,c,o,l),a.stroke(),a.fillStyle="#FF0000".concat(n.transparencia),a.beginPath(),a.arc(n.x,n.y,n.r,0,2*Math.PI,0),a.fill(),a.strokeStyle="#000000".concat(n.transparencia),a.lineWidth=.1*n.r,a.stroke()},k=function(e){return e[Math.floor(Math.random()*e.length)]},w=void 0,S={x:-100,y:-100,r:50,dx:1,dy:1,speed:20,transparencia:60},j=function(e){Object(f.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={speed:20,radio:50,transparencia:60},e.reiniciar=function(){void 0!==w&&(S.x=-100,S.y=-100,S.r=e.state.radio,S.speed=e.state.speed,S.transparencia=e.state.transparencia,w=void 0)},e.setSpeed=function(t){e.setState({speed:parseFloat(t.target.value)})},e.setRadio=function(t){e.setState({radio:parseFloat(t.target.value)})},e.setTransparencia=function(t){e.setState({transparencia:parseFloat(t.target.value)})},e}return Object(d.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"Control"},r.a.createElement("label",null,"Velocidad de bola"),r.a.createElement("input",{type:"number",min:"1",id:"speed",defaultValue:this.state.speed,onChange:this.setSpeed}),r.a.createElement("label",null,"Radio de bola"),r.a.createElement("input",{type:"number",min:"10",id:"radio",defaultValue:this.state.radio,onChange:this.setRadio}),r.a.createElement("label",null,"Transparencia"),r.a.createElement("input",{type:"number",min:"10",id:"transparencia",defaultValue:this.state.transparencia,onChange:this.setTransparencia}),r.a.createElement("button",{onClick:this.reiniciar},"Reiniciar"))}}]),a}(r.a.Component);var O=function(){var e=Object(n.useRef)(null),t=Object(n.useRef)(null),a=function(){var e=Object(s.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a();case 2:t=e.sent,setInterval((function(){i(t)}),10);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),i=function(){var a=Object(s.a)(l.a.mark((function a(n){var r,i,c,o,s,u,d;return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(void 0===w){a.next=3;break}a.next=17;break;case 3:if("undefined"===typeof e.current||null===e.current||4!==e.current.video.readyState){a.next=17;break}return r=e.current.video,i=e.current.video.videoWidth,c=e.current.video.videoHeight,e.current.video.width=i,e.current.video.height=c,t.current.width=i,t.current.height=c,o=t.current.getContext("2d"),a.next=14,n.detect(r);case 14:s=a.sent,void 0!==(w=g(s,S))?E(r,w,o,S):(u=[.95,1.05,1],d=.2*S.r,S.x+S.r>t.current.width+d?S.dx=-1*k(u):S.x-S.r<-d&&(S.dx=k(u)),S.y+S.r>t.current.height+d?S.dy=-1*k(u):S.y-S.r<-d&&(S.dy=k(u)),S.x=S.x+S.dx*S.speed,S.y=S.y+S.dy*S.speed,m(s,o,S));case 17:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}();return Object(n.useEffect)((function(){a()}),[]),r.a.createElement("div",{className:"App"},r.a.createElement(j,null),r.a.createElement("header",{className:"App-header"},r.a.createElement(y.a,{ref:e,muted:!0,style:{position:"absolute",marginLeft:"auto",marginRight:"auto",left:0,right:0,textAlign:"center",zindex:9,width:640,height:480}}),r.a.createElement("canvas",{ref:t,style:{position:"absolute",marginLeft:"auto",marginRight:"auto",left:0,right:0,textAlign:"center",zindex:8,width:640,height:480}})))};c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(O,null)),document.getElementById("root"))}},[[247,1,2]]]);
//# sourceMappingURL=main.8a9df73e.chunk.js.map