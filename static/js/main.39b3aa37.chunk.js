(this["webpackJsonpia-ball-game"]=this["webpackJsonpia-ball-game"]||[]).push([[0],{247:function(e,t,n){e.exports=n(274)},252:function(e,t,n){},258:function(e,t){},259:function(e,t){},267:function(e,t){},270:function(e,t){},271:function(e,t){},272:function(e,t,n){},274:function(e,t,n){"use strict";n.r(t);var r=n(64),a=n.n(r),i=n(226),c=n.n(i),o=(n(252),n(5)),l=n.n(o),u=n(13),s=(n(273),n(246)),f=n(245),d=n.n(f),h=(n(272),n(17)),x=n(8),b=function(e,t,n){t.fillStyle="#FF000080",t.beginPath(),t.arc(n.x,n.y,n.r,0,2*Math.PI,0),t.fill(),e.forEach((function(e){var n=Object(x.a)(e.bbox,4),r=n[0],a=n[1],i=n[2],c=n[3],o=e.class,l=Math.floor(100*e.score);t.strokeStyle="green",t.font="18px Arial",t.fillStyle="green",t.beginPath(),t.scale(-1,1),t.fillText(o+" "+l+"%",-i-r,a),t.scale(-1,1),t.lineWidth=3,t.rect(r,a,i,c),t.stroke()}))},p=function(e,t){var n,r=Object(h.a)(e);try{for(r.s();!(n=r.n()).done;){var a=n.value;if("person"===a.class&&a.score>.5){var i=a.bbox[0],c=a.bbox[1],o=a.bbox[2],l=a.bbox[3],u=t.x,s=t.y;if(t.x<i?u=i:t.x>i+o&&(u=i+o),t.y<c?s=c:t.y>c+l&&(s=c+l),Math.sqrt(Math.pow(t.x-u,2)+Math.pow(t.y-s,2))+35<t.r)return a}}}catch(f){r.e(f)}finally{r.f()}},v=function(e,t,n,r){n.drawImage(e,0,0);var a=Object(x.a)(t.bbox,4),i=a[0],c=a[1],o=a[2],l=a[3];n.strokeStyle="red",n.font="30px bold Arial",n.fillStyle="red",n.beginPath(),n.scale(-1,1),n.fillText("\xa1Toque!",-i-o,c-5),n.scale(-1,1),n.lineWidth=3,n.rect(i,c,o,l),n.stroke(),n.fillStyle="#FF000080",n.beginPath(),n.arc(r.x,r.y,r.r,0,2*Math.PI,0),n.fill()},y=function(e){return e[Math.floor(Math.random()*e.length)]},g=void 0,m=void 0,w={x:0,y:0,r:50,dx:1,dy:1,speed:20};var k=function(){var e=Object(r.useRef)(null),t=Object(r.useRef)(null),n=function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a();case 2:t=e.sent,m=setInterval((function(){i(t)}),10);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),i=function(){var n=Object(u.a)(l.a.mark((function n(r){var a,i,c,o,u,s,f;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if("undefined"===typeof e.current||null===e.current||4!==e.current.video.readyState){n.next=14;break}return a=e.current.video,i=e.current.video.videoWidth,c=e.current.video.videoHeight,e.current.video.width=i,e.current.video.height=c,t.current.width=i,t.current.height=c,o=t.current.getContext("2d"),n.next=11,r.detect(a);case 11:u=n.sent,void 0!==(g=p(u,w))?(v(a,g,o,w),clearInterval(m)):(s=[.7,1.05,1],f=[-.7,-1.05,-1],w.x+w.r>t.current.width+10?w.dx=y(f):w.x-w.r<-10&&(w.dx=y(s)),w.y+w.r>t.current.height+10?w.dy=y(f):w.y-w.r<-10&&(w.dy=y(s)),w.x=w.x+w.dx*w.speed,w.y=w.y+w.dy*w.speed,b(u,o,w));case 14:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return Object(r.useEffect)((function(){n()}),[]),a.a.createElement("div",{className:"App"},a.a.createElement("header",{className:"App-header"},a.a.createElement(d.a,{ref:e,muted:!0,style:{position:"absolute",marginLeft:"auto",marginRight:"auto",left:0,right:0,textAlign:"center",zindex:9,width:640,height:480}}),a.a.createElement("canvas",{ref:t,style:{position:"absolute",marginLeft:"auto",marginRight:"auto",left:0,right:0,textAlign:"center",zindex:8,width:640,height:480}})))};c.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(k,null)),document.getElementById("root"))}},[[247,1,2]]]);
//# sourceMappingURL=main.39b3aa37.chunk.js.map